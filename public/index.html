<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" /> <!-- Added for responsiveness -->
  <title>Scenez Lobby ğŸ¨</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&family=Montserrat:wght@400;600&display=swap" rel="stylesheet" />
</head>
<body>
  <!-- Avatar picker container top-right -->
  <div class="avatar-picker-container" role="region" aria-label="Avatar Picker">
    <button id="avatarToggleBtn" title="Pick your avatar" aria-haspopup="true" aria-expanded="false">ğŸ¾ Pick Avatar</button>
    <div id="avatarOptions" class="avatar-options hidden" role="menu" aria-label="Avatar options">
      <button class="avatar-option" data-avatar="ğŸ¶" role="menuitem" aria-label="Dog">ğŸ¶</button>
      <button class="avatar-option" data-avatar="ğŸ±" role="menuitem" aria-label="Cat">ğŸ±</button>
      <button class="avatar-option" data-avatar="ğŸ¦Š" role="menuitem" aria-label="Fox">ğŸ¦Š</button>
      <button class="avatar-option" data-avatar="ğŸ»" role="menuitem" aria-label="Bear">ğŸ»</button>
      <button class="avatar-option" data-avatar="ğŸ¼" role="menuitem" aria-label="Panda">ğŸ¼</button>
      <button class="avatar-option" data-avatar="ğŸ¨" role="menuitem" aria-label="Koala">ğŸ¨</button>
      <button class="avatar-option" data-avatar="ğŸ¯" role="menuitem" aria-label="Tiger">ğŸ¯</button>
      <button class="avatar-option" data-avatar="ğŸ¦" role="menuitem" aria-label="Lion">ğŸ¦</button>
      <button class="avatar-option" data-avatar="ğŸ¸" role="menuitem" aria-label="Frog">ğŸ¸</button>
      <button class="avatar-option" data-avatar="ğŸµ" role="menuitem" aria-label="Monkey">ğŸµ</button>
    </div>
    <div id="selectedAvatarDisplay" class="selected-avatar" aria-live="polite" aria-atomic="true">ğŸ¾</div>
  </div>

  <main class="container" role="main">
    <h1 class="title">ğŸ¬ Scenez</h1>
    <p class="subtitle">Draw. Laugh. Repeat.</p>

    <form class="form" onsubmit="return false;" aria-label="Join or create game room">
      <input id="name" name="name" type="text" placeholder="Your name" autocomplete="off" required aria-required="true" />
      <input id="room" name="room" type="text" placeholder="Room code (e.g., AB12)" autocomplete="off" />
      <button type="button" onclick="joinRoom()">Join Room</button>
      <button type="button" onclick="createRoom()">Create Room</button>
    </form>

    <section class="players-list" aria-live="polite" aria-relevant="additions" aria-label="Players in room">
      <h2>ğŸ® Players in Room:</h2>
      <ul id="players"></ul>
    </section>

    <div class="start-button-container">
      <button id="startGameBtn" type="button" onclick="startManualGame()" disabled>Start Game</button>
      <!-- Disabled by default, enable in JS when ready -->
    </div>
  </main>

  <div class="bg-anim" aria-hidden="true">
    <div></div><div></div><div></div><div></div><div></div>
  </div>

  <!-- Voting page template -->
  <template id="votingPageTemplate">
    <section class="voting-page" role="dialog" aria-modal="true" aria-labelledby="votingTitle">
      <div class="voting-bg"></div> <!-- âœ¨ Animated background layer -->

      <h1 id="votingTitle" class="title">ğŸ¨ Vote for the Best Drawing</h1>
      <p class="subtitle">Hover and click to vote. Only one vote allowed.</p>

      <div class="gallery-grid" id="galleryGrid" role="list"></div>
      <div id="voteResults" class="vote-results" aria-live="polite" aria-atomic="true"></div>

      <button id="backToLobbyBtn" class="back-button" type="button">â¬… Back to Lobby</button>
    </section>
  </template>

  <script src="/socket.io/socket.io.js"></script>
  <script src="client.js"></script>

  <script>
    // Avatar picker logic
    const avatarToggleBtn = document.getElementById('avatarToggleBtn');
    const avatarOptions = document.getElementById('avatarOptions');
    const selectedAvatarDisplay = document.getElementById('selectedAvatarDisplay');

    let selectedAvatar = localStorage.getItem('selectedAvatar') || 'ğŸ¾';
    selectedAvatarDisplay.textContent = selectedAvatar;

    avatarToggleBtn.addEventListener('click', () => {
      const isHidden = avatarOptions.classList.toggle('hidden');
      avatarToggleBtn.setAttribute('aria-expanded', !isHidden);
    });

    avatarOptions.querySelectorAll('.avatar-option').forEach(btn => {
      btn.addEventListener('click', () => {
        const avatar = btn.dataset.avatar;
        if (confirm(`Confirm avatar ${avatar}?`)) {
          selectedAvatar = avatar;
          localStorage.setItem('selectedAvatar', selectedAvatar);
          selectedAvatarDisplay.textContent = selectedAvatar;
          avatarOptions.classList.add('hidden');
          avatarToggleBtn.setAttribute('aria-expanded', false);
        }
      });
    });
  </script>
</body>
</html>
